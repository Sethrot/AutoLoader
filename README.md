# AutoLoader (for GearSwap)

AutoLoader exposes sets management to the command window and loads them from disk, saving you from modifying luas whenever your gear changes.
AutoLoader also automatically generates sets from the gear you already own.  

AutoLoader lives in `GearSwap/libs` and runs when your job file loads.

---

## Quick Start

1) **Drop the lib files into GearSwap/libs**
```
Windower/addons/GearSwap/libs/
  autoloader.lua
  autoloader-sets.lua
  autoloader-codex.lua
  autoloader-utils.lua
  autoloader-logger.lua
```

<img width="620" height="420" alt="image" src="https://github.com/user-attachments/assets/2735a6ec-714a-4fb2-8026-6e722e5241e3" />

2) **Add one line to the top of your empty job file**
If you're already familiar with how GearSwap works, add this line to the top of your existing lua:
```lua
include("autoloader") 
```
If you don't have any GearSwap luas yet:

Check [data/Seloan_DRK.lua](https://github.com/NeatMachine/AutoLoader/blob/main/data/Seloan_DRK.lua) for a minimal job file, which is a good place to start.

For intermediate, [data/Seloan_RDM.lua](https://github.com/NeatMachine/AutoLoader/blob/main/data/Seloan_RDM.lua) is my starter RDM file.

Rename your file to YourCharacter_JOB

<img width="602" height="156" alt="image" src="https://github.com/user-attachments/assets/cf337fe8-83a7-4f13-8885-245668815f0b" />


## What it does
**Auto-Generated Sets**

Whenever you change jobs, AutoLoader will immediately **scan your gear and generate baseline sets** (saved in data/jobs/drk/auto)
This is an "Optimize Gear" button for FFXI, and it works for various situations like idle, melee/engaged, fastcast for casting, etc.
However, the "Optimize Gear" button for FFXI is complicated, and it works about as well as you'd expect.

*If you're a FFXI master tactician, please consider contributing to [libs/autoloader-codex.](https://github.com/NeatMachine/AutoLoader/blob/main/libs/autoloader-codex.lua)*

*SET_FUNCTIONS describe the optimal gear for each set. Most of it is AI generated for now. Check the calc_ functions*

**Sets Management**
   
The primary reason AutoLoader was created is because I'm a poorly equipped casual and I don't want to edit luas every time I get a new piece of gear. Leveraging GearSwap's export command, AutoLoader allows you to manage (save/update/view/delete) named sets using the *//gs c auto sets* command. 

**To get the most out of AutoLoader, you'll want to save a few core sets yourself instead of relying on the autogenerated versions.**

These are some of the most important ones:
```
//gs c auto sets save idle
//gs c auto sets save melee
//gs c auto sets save fastcast
//gs c auto sets save ws
//gs c auto sets save <magic school> (elemental | enhancing | enfeebling | etc)
```

You can also save a set for any ability or spell by name, and AutoLoader will use it automatically (precast for abilities, midcast for spells)
```
//gs c auto sets save savage blade
```
Save those sets above, keep saving them as you get new gear, and create a couple of sets for your weaponskills, and you'll be getting 90% of the value out of AutoLoader.

**Keep your lua and just use *sets***

The *autoloader-sets* library will give you the set mangement functionality independently of AutoLoader, so you can use it with Mote or whatever else.
An example of that would be:
```lua
local autosets = require("autoloader-sets")

get_sets()
   -- some other stuff you're doing in your lua

   sets.best.gear = autosets.get("sets.best.gear") -- or whatever else you want to name it when you save
end
```

***More AutoLoader details**

AutoLoader makes heavy use of GearSwap's set combinations to load relevant sets in order of specificity.

Whenever you cast Fire IV, AutoLoader does, in order:
```
precast => 
equip "fastcast" because this is a magic spell*
```
```
midcast => 
equip predefined sets mapped to "fire"
equip "fire" set (if it exists)
equip predefined sets mapped to "fire iv"
equip "fire iv" set (if it exists)
```
For each of those steps, it also looks for the automatically generated sets if you haven't defined one. 
There are no automatically defined sets for explicit spells, abilities, or weaponskills - only for the predefined sets.
Named spells assume midcast, named anything else assumes precast. (If you do save precast.fire or midcast.savage_blade for whatever reason, it *will* be used for the step you specified.)


## Help
```
/gs c a help
/gs c a help sets
```

## Philosophy

- **Plain GearSwap tables.** Everything it generates/saves is just a normal set you can open and edit. This makes it immediately portable to existing luas.
- **Your saves win.** Anything you save yourself overrides auto sets.
- **Better than nothing.** Save a few core sets for your job (idle, melee, fastcast, ws, + one magic family), and a lot of the heavy lifting is done. Add more detail later as you like.
