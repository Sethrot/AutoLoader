# AutoLoader (for GearSwap)

AutoLoader automatically builds and equips GearSwap sets from the gear you already own.  
It lives in `GearSwap/libs` and runs when your job file loads. No separate addon needed.

---

## Quick Start

1) **Drop the lib files into GearSwap/libs**
```
Windower/addons/GearSwap/libs/
  autoloader.lua
  autoloader-sets.lua
  autoloader-codex.lua
  autoloader-utils.lua
  autoloader-logger.lua
```

2) **Add one line to the top of your empty job file**
```lua
include("autoloader") 
```
Check [data/Seloan_DRK.lua](https://github.com/NeatMachine/AutoLoader/blob/main/data/Seloan_DRK.lua) for a minimal job file.

For intermediate, [data/Seloan_RDM.lua](https://github.com/NeatMachine/AutoLoader/blob/main/data/Seloan_RDM.lua) is my starter RDM file.


## What it does
**Auto-Generated Sets**

Whenever you change jobs, AutoLoader will immediately **scan your gear and generate baseline sets** (saved in data/jobs/drk/auto)
This is an "Optimize Gear" button for FFXI, and it works for various situations like idle, melee/engaged, fastcast for casting, etc.
However, the "Optimize Gear" button for FFXI is complicated, and it works about as well as you'd expect.

*If you're a FFXI master tactician, please consider contributing to [libs/autoloader-codex.](https://github.com/NeatMachine/AutoLoader/blob/main/libs/autoloader-codex.lua)*

*SET_FUNCTIONS define the parameters used to calculate the optimal gear for each set. Most of it is AI generated for now. Check the calc_* functions*

**Sets Management**
   
The primary reason AutoLoader was created is because I'm a poorly equipped casual and I don't want to edit luas every time I get a new piece of gear. Leveraging GearSwap's export command, AutoLoader allows you to manage (save/update/view/delete) named sets using the *//gs c auto sets* command. 

**To get the most out of AutoLoader, you'll want to save a few core sets yourself instead of relying on the autogenerated versions.**

These are some of the most important ones:
```
//gs c auto sets save idle
//gs c auto sets save melee
//gs c auto sets save fastcast
//gs c auto sets save ws
//gs c auto sets save <magic school> (elemental | enhancing | enfeebling | etc)
```

You can also save a set for any ability or spell by name, and *autoloader* will use it automatically (precast for abilities, midcast for spells)
```
//gs c auto sets save savage blade
```
Save those sets above, keep saving them as you get new gear, and create a couple of sets for your weaponskills, and you'll be getting 90% of the value out of AutoLoader.

But we'll talk about how it works in more detail below.

## Advanced
**Keep your lua and just use *sets***

The *autoloader-sets* library will give you the set mangement functionality independently of *autoloader*, so you can use it with Mote or whatever else.
An example of that would be:
```lua
local autosets = require("autoloader-sets")

get_sets()
   -- some other stuff you're doing in your lua

   sets.best.gear = autosets.get("sets.best.gear") -- or whatever else you want to name it when you save
end
```

***autoloader* details**

An important part of this tool is *autoloader-codex*, which is meant to (hopefully) be contributed to by people more knowledgeable than I am. Codex describes stats, spells, sets, etc. and helps to drive *autoloader* decisions.

AutoLoader makes heavy use of GearSwap's combine_set to load relevant sets in order of specificity.

Whenever you cast Fire IV, AutoLoader does, in order:
```
precast => 
equip "fastcast" because this is a magic spell*
```
```
midcast => 
equip predefined sets mapped to "fire"
equip "fire" set (if it exists)
equip predefined sets mapped to "fire iv"
equip "fire iv" set (if it exists)
```
For each of those steps, it also looks for the automatically generated sets if you haven't defined one. 
There are no automatically defined sets for explicit spells, abilities, or weaponskills - only for the predefined sets.
Named spells assume midcast, named anything else assumes midcast. (If you do save precast.fire or midcast.savage_blade for whatever reason, it *will* be used for the step you specified.)


## Help
```
/gs c a help
/gs c a help sets
```

## Philosophy

- **Plain GearSwap tables.** Everything it generates/saves is just a normal set you can open and edit. This makes it immediately portable to existing luas.
- **Your saves win.** Anything you save yourself overrides auto sets.
- **Better than nothing.** Core five sets (idle, melee, fastcast, ws, + one magic family) carry 90% of play. Add detail later as you like.
