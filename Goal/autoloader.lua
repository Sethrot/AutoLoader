--the main logic
--handles gearswap hooks
--modes, states, etc
--handles commands